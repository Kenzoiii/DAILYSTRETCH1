{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile | DailyStretch</title>
    <link rel="stylesheet" href="{% static 'dailystretch_app/css/segments/profile.css' %}?v=2">
    <link rel="icon" href="{% static 'dailystretch_app/images/logo.png' %}" type="image/png">
    

</head>

<body>

    <main class="profile">
    <h2>Your Profile</h2>
    <p class="subtitle">Manage your personal information</p>

    <div class="card" id="profile-card" data-name="{{ request.user.username }}" data-bio="{{ profile.bio|default_if_none:'' }}" data-dob="{{ profile.date_of_birth|date:'Y-m-d' }}">
        {% if profile.profile_picture %}
        <img class="profile-image" src="{{ profile.profile_picture.url }}" alt="Profile Picture">
        {% else %}
        <img class="profile-image" src="{% static 'dailystretch_app/images/default-profile.png' %}" alt="Default Profile Picture">
        {% endif %}

        <div class="upload-btn-container">
            <button id="uploadPicBtn" class="edit-btn">
                <img src="{% static 'dailystretch_app/images/upload.png' %}" alt="upload"> Upload Picture
            </button>
            <input type="file" id="profile_picture_external" accept="image/*" style="display:none;">
        </div>

        <div class="profile-info">
            <label>Name</label>
            <input type="text" id="pf-name" value="{{ request.user.username }}" readonly>
            <small id="name-count">{{ request.user.username|length }}/50 characters</small>

            <label>Bio</label>
            <textarea id="pf-bio" rows="3" disabled>{{ profile.bio }}</textarea>
            <small id="bio-count">{{ profile.bio|length|default:0 }}/200 characters</small>

            <label>Email</label>
            <input type="text" id="pf-email" value="{{ request.user.email }}" readonly>
            <small>Email cannot be changed</small>

            <button class="edit-btn" id="editProfileBtn">Edit Profile</button>
        </div>
    </div>
</main>


    <!-- Edit Profile Modal -->
    <div class="modal" id="editProfileModal">
        <div class="modal-content">
            <h3>Edit Profile</h3>
            <form method="POST" enctype="multipart/form-data" id="profileForm" action="{% url 'profile' %}">
                {% csrf_token %}

                <label for="name">Name</label><br>
                <input type="text" name="name" id="name" value="{{ request.user.username }}"><br><br>

                <label for="bio">Bio:</label><br>
                <textarea name="bio" id="bio">{{ profile.bio }}</textarea><br><br>

                          <div class="modal-buttons">
                    <button type="submit" class="save-btn">Save Changes</button>
                    <button type="button" class="cancel-btn" id="cancelBtn">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script src="{% static 'dailystretch_app/js/segments/profile.js' %}"></script>

</body>
</html>
`
